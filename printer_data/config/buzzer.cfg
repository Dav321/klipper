[pwm_cycle_time BEEPER_pin]
pin: PC6
#   Beeper pin. This parameter must be provided.
#   D31 is Beeper pin.
value: 0
#   Silent at power on, set to 1 if active low.
shutdown_value: 0
#   Disable at emergency shutdown (no PWM would be available anyway).
cycle_time: 0.001
#   Default PWM frequency : 0.001 = 1ms will give a tone of 1kHz
#   Although not pitch perfect.

[gcode_macro M300]
gcode:
    # Use a default 1kHz tone if S is omitted.
    {% set S = params.S|default(1000)|int %}
    # Use a 10ms duration is P is omitted.
    {% set P = params.P|default(100)|int %}
    SET_PIN PIN=BEEPER_pin VALUE=0.5 CYCLE_TIME={ 1.0/S if S > 0 else 1 }
    G4 P{P}
    SET_PIN PIN=BEEPER_pin VALUE=0

[gcode_macro LevelUP]
gcode:
  M300 S1046 P100
  M300 S1318 P100
  M300 S1567 P100
  M300 S2093 P100
  M300 S2637 P100
  M300 S3135 P266
  M300 S2637 P266
  M300 S0 P100
  
  M300 S1046 P100
  M300 S1244 P100
  M300 S1661 P100
  M300 S2093 P100
  M300 S2489 P100
  M300 S3322 P266
  M300 S2489 P266
  M300 S0 P100
  
  M300 S1174 P100
  M300 S1396 P100
  M300 S932 P100
  M300 S2349 P100
  M300 S2793 P100
  M300 S1864 P100
  
  M300 S0 P266
  M300 S1864 P80
  M300 S0 P40
  M300 S1864 P80
  M300 S0 P40
  M300 S1864 P80
  M300 S0 P40
  M300 S4186 P600 ;Congrats

[gcode_macro Success]
gcode:
  M300 P136 S1047
  M300 P136 S1319
  M300 P136 S1047

  